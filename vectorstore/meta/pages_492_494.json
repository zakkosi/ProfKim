{
  "doc_id": "pages_492_494",
  "text": "470\nComputer Vision: Algorithms and Applications (September 3, 2010 draft)\nsional photographers (Freeman 2008).2 A good survey of image matting is provided by Wang\nand Cohen (2007a).\nThere are also several courses on computational photography where the instructors have\nprovided extensive on-line materials, e.g., Fr´edo Durand’s Computation Photography course\nat MIT,3 Alyosha Efros’ class at Carnegie Mellon,4 Marc Levoy’s class at Stanford,5 and a\nseries of SIGGRAPH courses on Computational Photography.6\n10.1 Photometric calibration\nBefore we can successfully merge multiple photographs, we need to characterize the func-\ntions that map incoming irradiance into pixel values and also the amounts of noise present\nin each image. In this section, we examine three components of the imaging pipeline (Fig-\nure 10.2) that affect this mapping.\nThe ﬁrst is the radiometric response function (Mitsunaga and Nayar 1999), which maps\nphotons arriving at the lens into digital values stored in the image ﬁle (Section 10.1.1). The\nsecond is vignetting, which darkens pixel values near the periphery of images, especially at\nlarge apertures (Section 10.1.3). The third is the point spread function, which characterizes\nthe blur induced by the lens, anti-aliasing ﬁlters, and ﬁnite sensor areas (Section 10.1.4).7 The\nmaterial in this section builds on the image formation processes described in Sections 2.2.3\nand 2.3.3, so if it has been a while since you looked at those sections, please go back and\nreview them.\n10.1.1 Radiometric response function\nAs we can see in Figure 10.2, a number of factors affect how the intensity of light arriving\nat the lens ends up being mapped into stored digital values. Let us ignore for now any non-\nuniform attenuation that may occur inside the lens, which we cover in Section 10.1.3.\nThe ﬁrst factors to affect this mapping are the aperture and shutter speed (Section 2.3),\nwhich can be modeled as global multipliers on the incoming light, most conveniently mea-\nsured in exposure values (log2 brightness ratios). Next, the analog to digital (A/D) converter\non the sensing chip applies an electronic gain, usually controlled by the ISO setting on your\ncamera. While in theory this gain is linear, as with any electronics non-linearities may be\n2 Gulbins and Gulbins (2009) discuss related photographic techniques.\n3 MIT 6.815/6.865, http://stellar.mit.edu/S/course/6/sp08/6.815/materials.html.\n4 CMU 15-463, http://graphics.cs.cmu.edu/courses/15-463/.\n5 Stanford CS 448A, http://graphics.stanford.edu/courses/cs448a-10/.\n6 http://web.media.mit.edu/∼raskar/photo/.\n7 Additional photometric camera and lens effects include sensor glare, blooming, and chromatic aberration, which\ncan also be thought of as a spectrally varying form of geometric aberration (Section 2.2.3).\n10.1 Photometric calibration\n471\nScene\nRadiance\nDSP\nRAW\nSensor chip\nCamera Body\nOptics\nAperture\nSensor\n(CCD/CMOS)\nADC\nDemosaic\n(Sharpen)\nWhite \nBalance\nGamma/curve\nCompress\nShutter\nGain\n(ISO)\nJPEG\n(a)\nADC\nRAW\nDSP\nSensor chip\nCamera Body\nScene \nRadiance\nOptics\nAperture\nSensor\n(CCD/CMOS)\nDemosaic\n(Sharpen)\nWhite \nBalance\nGamma/curve\nCompress\nShutter\nGain\n(ISO)\nJPEG\nBlur kern. & RD\nF-stop & Vignette\nExposure T\nAA CFA\nNoise\nISO Gain\nQ1\n?\n?\nRGB Gain\nQ2\nGamma & S-curve\n(b)\nFigure 10.2 Image sensing pipeline: (a) block diagram showing the various sources of noise\nas well as the typical digital post-processing steps; (b) equivalent signal transforms, including\nconvolution, gain, and noise injection. The abbreviations are: RD = radial distortion, AA =\nanti-aliasing ﬁlter, CFA = color ﬁlter array, Q1 and Q2 = quantization noise.\n472\nComputer Vision: Algorithms and Applications (September 3, 2010 draft)\n(a)\n(b)\nFigure 10.3 Radiometric response calibration: (a) typical camera response function, show-\ning the mapping between incoming log irradiance (exposure) and output eight-bit pixel val-\nues, for one color channel (Debevec and Malik 1997) c⃝1997 ACM; (b) color checker chart.\npresent (either unintentionally or by design). Ignoring, for now, photon noise, on-chip noise,\nampliﬁer noise, and quantization noise, which we discuss shortly, you can often assume that\nthe mapping between incoming light and the values stored in a RAW camera ﬁle (if your\ncamera supports this) is roughly linear.\nIf images are being stored in the more common JPEG format, the camera’s digital signal\nprocessor (DSP) next performs Bayer pattern demosaicing (Sections 2.3.2 and 10.3.1), which\nis a mostly linear (but often non-stationary) process. Some sharpening is also often applied at\nthis stage. Next, the color values are multiplied by different constants (or sometimes a 3 × 3\ncolor twist matrix) to perform color balancing, i.e., to move the white point closer to pure\nwhite. Finally, a standard gamma is applied to the intensities in each color channel and the\ncolors are converted into YCbCr format before being transformed by a DCT, quantized, and\nthen compressed into the JPEG format (Section 2.3.3). Figure 10.2 shows all of these steps\nin pictorial form.\nGiven the complexity of all of this processing, it is difﬁcult to model the camera response\nfunction (Figure 10.3a), i.e., the mapping between incoming irradiance and digital RGB val-\nues, from ﬁrst principles. A more practical approach is to calibrate the camera by measuring\ncorrespondences between incoming light and ﬁnal values.\nThe most accurate, but most expensive, approach is to use an integrating sphere, which is\na large (typically 1m diameter) sphere carefully painted on the inside with white matte paint.\nAn accurately calibrated light at the top controls the amount of radiance inside the sphere\n(which is constant everywhere because of the sphere’s radiometry) and a small opening at the\nside allows for a camera/lens combination to be mounted. By slowly varying the current going\ninto the light, an accurate correspondence can be established between incoming radiance and",
  "image_path": "page_493.jpg",
  "pages": [
    492,
    493,
    494
  ]
}